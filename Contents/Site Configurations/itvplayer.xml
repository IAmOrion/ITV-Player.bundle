<?xml version="1.0" encoding="UTF-8"?>

<site  site="http://www.itv.com/itvplayer"
       plugin="http://www\.itv\.com/mediaplayer/ITVMediaPlayer\.swf.*"
       initialState="loading" 
       version="2.0">
	
    <crop x="0" y="60" width="640" height="360"/>
     
	<seekbar type="simple" smallStep="5" bigStep="10">
		<start x="1" y="430" />  
		<end x="639" y="430" />
		<dead x="325" y="460" />
		<played>
			<color rgb="000000" />
			<color rgb="666666" />
			<color rgb="FFFFFF" />
		</played>
    </seekbar>

    <state name="loading">
    	<event>
			<condition>
				<frameLoaded/>
			</condition>
			<action>
				<!--
					Make player only element on page so that Windows PMS and OSX PMS
				    have the same co-ordinate origin.
				 --> 
				<run script="$('body').html($('#puxVideoPlayerPlaceholder').html())"/>
				<goto state="buffering" />
			</action>
		</event>
    </state>
    
     <state name="buffering">
		<event>
			<condition>
				<url matches=".*image\.jpg.*" />
			</condition>
			<action>
				<!-- resize player so that controls are no longer overlaid over video -->
				<run script="$('#ITVMediaPlayer').attr('height', '480');" />
				<!-- wait a few seconds -->
				<pause time="2000" />
				<click x="23" y="460" />
				<!--
				  Manually move mouse to dead position.Pause a little
				  while to give player chance to process each click.
				-->
				<pause time="500" />
				<click x="325" y="460" />
				<goto state="playing" />
				
			</action>
		</event>
	</state>
              
      <!-- Playing -->
	<state name="playing">
		<event>
			<condition>
				<command name="pause" />
			</condition>
			<action>
				<click x="23" y="460" />
				<!--
				  Manually move mouse to dead position.Pause a little
				  while to give player chance to process each click.
				-->
				<pause time="100" />
				<click x="325" y="460" />
				<goto state="paused" />
			</action>
		</event>
	</state>

	<!-- Paused -->
	<state name="paused">
		<event>
			<condition>
				<command name="play" />
			</condition>
			<action>
				<click x="23" y="460" />
				<!--
				  Manually move mouse to dead position.Pause a little
				  while to give player chance to process each click.
				-->
				<pause time="100" />
				<click x="325" y="460" />
				<goto state="playing" />
			</action>
		</event>
	</state>
        
     
</site>
